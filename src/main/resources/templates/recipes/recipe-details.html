<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${recipe.title}">Recipe Details</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">
    <h1 th:text="${recipe.title}">Recipe Title</h1>

    <p><strong>Author:</strong> <span th:text="${author.email}"></span></p>
    <p><strong>Difficulty:</strong> <span th:text="${#strings.toLowerCase(recipe.difficulty)}"></span></p>
    <p><strong>Preparation Time:</strong> <span th:text="${recipe.preparationTimeMinutes + ' min'}"></span></p>

    <h4>Categories:</h4>
    <ul>
        <li th:each="cat : ${recipe.mealCategories}"
            th:text="${cat.name}">
        </li>
    </ul>

    <h4>Ingredients:</h4>
    <ul>
        <li th:each="recipeIngredient : ${recipe.ingredients}"
            th:text="${recipeIngredient.amount + ' ' + recipeIngredient.unit.displayName + ' ' + recipeIngredient.ingredient.name}">
            Ingredient
        </li>
    </ul>

    <h4>Instructions:</h4>
    <p th:text="${recipe.instructions}">Instructions go here.</p>

    <div th:if="${recipe.image != null}">
        <img th:src="${recipe.image.imageUrl}" class="recipe-detail-image" alt="Recipe Image">
    </div>

    <div class="mt-4">
        <a th:href="${redirectUrl}" class="btn btn-secondary">Back to List</a>

        <a th:if="${currentUserId == author.id}"
           th:href="@{/recipes/edit/{id}(id=${recipe.id})}"
           class="btn btn-primary ms-2">Edit</a>

        <a th:if="${currentUserId == author.id}"
           th:href="@{/recipes/delete/{id}(id=${recipe.id})}"
           class="btn btn-primary ms-2">Delete</a>

        <a th:href="@{/recipes/generate/{id}(id=${recipe.id})}"
           class="btn btn-outline-success ms-2">Download as PDF</a>
    </div>

    <hr class="my-5">

</div>

</body>
</html>
